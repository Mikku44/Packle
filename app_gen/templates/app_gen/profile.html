{% extends "app_gen/components/base_profile.html" %}
{% block profile %}
<style>
  dialog {
    margin: 0;

    width: 100wv;
  }

  [type=text] {
    background-color: unset;


  }


  .upload {
    padding: 45px 10px;
  }
  .cover {
    background: url(https://images.unsplash.com/photo-1575408264798-b50b252663e6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1053&q=80);
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    z-index: 0;
  }

  .cover::before {
    background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.782));
    position: absolute;
    z-index: -1;
    content: '';
    width: 100%;
    height: 100vh;
    transform: scale3d(1.5, 1.5, 1.5);
  }
</style>
{% if request.session.status != True %}
<!-- <span class="inline-flex items-center rounded-full  w-full bg-red-600/50 px-5 py-5 text-xs font-medium text-white ring-2 ring-offset-30 ring-red-600/20  ">Please <a href="# " class="underline px-1"> confirm your E-mail address </a> to use full options.</span> -->
{% endif %}
<div class="flex gap-3 bg-black p-5 rounded-3xl my-2 h-1/6 items-center overflow-hidden relative cover">

  <form action="/profile/" method="post" enctype="multipart/form-data" class="flex justify-center items-center gap-2">
    {% csrf_token %}
  <div class="bg-black overflow-hidden w-28  h-28 rounded-full relative group">
    <div class="absolute w-full h-full"><img id="img" class="object-cover w-full h-full" src="{{ pic }}" alt="" ></div>
    {% if request.session.username == username %}
    <div class="group-hover:opacity-50 duration-150 absolute top-50 bg-black opacity-0 w-full h-full">
     <input class="upload" id="upload" name="img" type="file" accept="image/*">
    </div>
    {% endif %}
    </div>
    <button class="bg-black p-3  rounded-md" hidden name="submit" value="imgsave" id="imgsave" type="submit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
    </svg>
    </button>
  </form>
  <div>
    <div class="flex justify-start group gap-5 items-center">
      <!-- <div class="text-2xl bg-none name">{{ request.session.username }}</div> -->
      <form action="/profile/" method="post">
        {% csrf_token %}
        <div class="flex items-center gap-3">
          <input type="text" id="inputname" value="{{ username }}" name="name" disabled class="text-2xl ring-0 focus:ring-0 focus:outline-none focus:bg-gray-900 rounded-md focus:px-2">
          {% if request.session.username == username %}
          <div class="flex items-center gap-2">
            <button onclick="rename()" type="button"
              class="name  duration-150 cursor-pointer p-2 bg-gray-400 rounded-full ">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="w-4 h-4">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" />
              </svg>
            </button>
            <button class="bg-black rounded-md opacity-0 duration-150 py-1 px-3 name" name="submit" type="submit">Save</button>
            <button class="name opacity-0 duration-150" type="button" onclick="actionBtn()">Cancel</button>
          </div>
          {%endif %}
        </div>
      </form>


      <script>
        x = document.getElementsByClassName("name");
        function rename() {
          
          actionBtn();
          inputname.focus();
        
        }
        upload.addEventListener("change", uploadPic);
        function uploadPic(){
          
          img.src = URL.createObjectURL(upload.files[0]);
          imgsave.removeAttribute('hidden');
        }
        
        function actionBtn(){
      
            inputname.toggleAttribute('disabled');
            for (let i = 0; i < x.length; i += 1) {
            x[i].classList.toggle('opacity-0');
            
    
          }
        }
   
      </script>

    </div>
    <div>{{ email }}</div>
    {% if username == request.session.username %}

    <div class="ring-2 w-24 text-center rounded-md ring-gray-400 my-2">{{ request.session.role }}</div>
    {% else %}
    <form action="{{ request.path }}" method="post">
      {% csrf_token %}
    {% if act %}
    <button type="submit" name="submit" value="follow" class="p-2 hover:bg-green-600 duration-150 w-24 text-center cursor-pointer bg-green-500 rounded-md my-2">Follow
    </button>
    {% else %}
    <button type="submit" name="submit" value="unfollow" class="p-2 hover:bg-green-600 duration-150 w-24 text-center cursor-pointer bg-green-500 rounded-md my-2">Following
    </button>
    {% endif %}
    </form>
    {% endif %}



  </div>
</div>

{% endblock %}
{% block title %}
<div>Generated</div>
<a href="/generator">
  <div
    class="text-sm duration-200 hover:bg-slate-700 shadow-lg bg-slate-800 p-3 px-5 rounded-lg flex items-center gap-2">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
      class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
    </svg>
    New generate
  </div>
</a>{% endblock %}
{% block content %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.js"></script>


<div class="grid grid-cols-2 md:grid-cols-4 mb-96 gap-4 z-0">

  {% for image in img %}



  <div class="grid gap-4 relative">
    
    <a href="/profile/generated/{{ image.gen.gen_id }}">
      <button data-modal-target="defaultModal" data-modal-toggle="defaultModal">
        <img class="h-auto max-w-full rounded-lg hover:scale-105 duration-150 hover:shadow-md" src={{image.gen.gen_source }} />
      </button>
    </a>


    {% if empty %}
    Not image was generated
    {% endif %}
  </div>

  {% endfor %}







  {% comment %}TODO modal {% endcomment %}

  <dialog id="fullscreen"
    class="fixed bg-black/50 top-0  left-0 right-0 z-50  w-full  p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full">
    <div class="flex  items-center justify-center">
      <!-- Modal content -->

      <img class="h-auto max-w-full rounded-lg "
        src="https://flowbite.s3.amazonaws.com/docs/gallery/masonry/image-11.jpg" alt="" />


    </div>
  </dialog>
  {% comment %}TODO endmodal {% endcomment %}

</div>
</div>

{% endblock %}